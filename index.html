<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Optimizer Pro 2.6</title>
    <style>
        body { 
            margin: 0; 
            background-color: #0f172a; 
            color: white; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
        }
        
        .box { 
            width: 95%; 
            max-width: 450px; /* Leggermente più larga per PC */
            padding: 30px; 
            background: #1e293b; 
            border-radius: 30px; 
            text-align: center; 
            border: 1px solid #334155; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.6); 
        }

        .sun { width: 60px; height: 60px; background: #fbbf24; border-radius: 50%; margin: 0 auto 20px; box-shadow: 0 0 25px #fbbf24; transition: 0.5s; }

        /* TITOLI DELLE SEZIONI */
        .section-title { 
            font-size: 13px; /* Più grande di prima */
            color: #94a3b8; 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 10px; 
            font-weight: 700; 
            letter-spacing: 1px; 
            text-transform: uppercase; 
        }
        
        /* LABEL SOPRA GLI INPUT */
        .input-label { 
            font-size: 13px; /* Aumentata per leggibilità PC */
            color: #cbd5e1; 
            margin-bottom: 6px; 
            display: block; 
            font-weight: 500;
        }
        
        .input-pair { display: flex; gap: 15px; }
        .input-col { flex: 1; text-align: left; }

        input { 
            width: 100%; 
            padding: 12px; 
            border-radius: 10px; 
            border: 1px solid #334155; 
            background: #0f172a; 
            color: white; 
            font-family: inherit; 
            font-size: 1rem; /* Font standard 16px per evitare zoom su iPhone e leggere bene su PC */
        }

        input[type="range"] { accent-color: #38bdf8; cursor: pointer; padding: 0; height: 8px; }
        
        .btn { 
            width: 100%; 
            padding: 15px; 
            background: #38bdf8; 
            color: #0f172a; 
            border: none; 
            border-radius: 12px; 
            font-weight: 800; 
            cursor: pointer; 
            margin-top: 15px; 
            text-transform: uppercase; 
            font-size: 0.85rem; 
            transition: 0.2s;
        }
        .btn:hover { background: #7dd3fc; transform: translateY(-2px); }

        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .res-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); }
        
        /* RISULTATI GRANDI */
        b { font-size: 1.5rem; color: #fbbf24; display: block; margin-top: 5px; }
        
        .highlight { color: #38bdf8; }
        .night { filter: grayscale(1) brightness(0.3); opacity: 0.3; box-shadow: none !important; }

        /* OTTIMIZZAZIONE PER SCHERMI GRANDI (PC) */
        @media (min-width: 600px) {
            .section-title { font-size: 14px; }
            .input-label { font-size: 14px; }
            input { font-size: 1.1rem; }
            b { font-size: 1.8rem; }
            .box { padding: 40px; }
        }
    </style>
</head>
<body>

<div class="box">
    <div class="sun" id="sun_viz"></div>
    <h2 style="margin: 0 0 25px 0; font-size: 20px; letter-spacing: 2px;">SOLAR OPTIMIZER</h2>

    <div style="margin-bottom: 25px;">
        <span class="section-title">Data e Ora di Analisi</span>
        <div class="input-pair">
            <div class="input-col">
                <span class="input-label">Giorno</span>
                <input type="date" id="d_val">
            </div>
            <div class="input-col">
                <span class="input-label">Ora Locale</span>
                <input type="time" id="t_val">
            </div>
        </div>
    </div>

    <div style="margin-bottom: 25px;">
        <span class="section-title">Coordinate Geografiche <span id="gps_status" class="highlight"></span></span>
        <div class="input-pair">
            <div class="input-col">
                <span class="input-label">Latitudine (N/S)</span>
                <input type="number" id="la_val" step="0.0001" placeholder="41.89">
            </div>
            <div class="input-col">
